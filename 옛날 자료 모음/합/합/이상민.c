#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <windows.h>
#include <time.h>
#include "game.h"
#pragma warning(disable:4996)
int s;

int arr14[14][40] =
{

	{ 1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,0,0,0,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1 },
	{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 },
};

/*
void treasuer(int *tx, int *ty)

{

	int i;

	for (i = 0; 1<2; i++)

	{

		do

		{

			tx[i] = rand() % 11;

			ty[i] = rand() % 11;

			printf("   ");

		} while ((tx[i] <= 1) || (ty[i] <= 1));

	}

}
*/

void gotoxy14(int x, int y)
{
	COORD Pos = { x, y };
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), Pos);
}


void MapDraw()

{
	int i, j;
	int x = 2, y = 2;

	for (i = 0; i<14; i++)
	{
		for (j = 0; j<40; j++)
		{
			if (arr14[i][j] == 1)
				printf("¡Ú");
			else
				printf("  ");
		}
		printf("\n");
	}



	gotoxy14(30, 25);
	printf("¡á¡á¡á¡á¡á");
}


void raser(int r)
{

	while (1)
	{

		gotoxy14(r, 24 - s);
		printf(" ");
		s++;
		gotoxy14(r, 24 - s);
		printf("^");
		Sleep(50);
		if (arr14[24 - s][r] == 1 || arr14[24 - s + 1][r] == 1)
		{
			arr14[24 - s][r] = 0;
			arr14[24 - s + 1][r] = 0;
			gotoxy14(r, 24 - s);
			printf(" ");
			s = 0;
			break;

		}
		if ((24 - s) == 0) {
			gotoxy14(r, 24 - s);
			printf(" ");
			s = 0;
			break;
		}


	}
}
void move14(char key, int *x1, int x_b)
{
	switch (key) {

	case 75:
		*x1 = *x1 - 1;
		if (*x1<1) *x1 = 1;
		break;
	case 32:
		raser(*x1 + 4); *x1 -= 1;
	case 77:
		*x1 = *x1 + 1;
		if (*x1>x_b) *x1 = x_b;
		break;

	default:;
	}
}
int main14()
{

	/*int tx[2], ty[2];*/
	srand((signed int)time(NULL));
	char key;
	int x = 30, y = 25;
	system("mode con cols=81 lines=26");
	MapDraw();
	/*treasuer(&tx[0], &ty[0]);*/






	do {
		gotoxy14(x, y);
		key = getch();
		move14(key, &x, 79);
		gotoxy14(x - 1, y);
		printf("       ");
		gotoxy14(x, y);
		printf("¡á¡á¡á¡á¡á");
	} while (key != 27);
	return 0;
}




