#include<stdio.h>
#include<stdlib.h>
#include<time.h>
#include<conio.h>
#include<windows.h>
#include "game.h"
#pragma warning(disable:4996)

int arr1[25][25] = { { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }//1
,{ 1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 }//2
,{ 1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 }//3
,{ 1,1,1,1,1,1,1,0,0,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1 }//4
,{ 1,0,0,0,0,0,1,0,0,1,0,0,0,0,1,1,0,0,1,0,0,0,0,0,1 }//5
,{ 1,0,0,0,0,0,1,0,0,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1 }//6
,{ 1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1 }//7
,{ 1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1 }//8
,{ 1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,1 }//9
,{ 1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1 }//10
,{ 1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1 }//11
,{ 1,1,1,1,0,0,1,0,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1 }//12
,{ 1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1 }//13
,{ 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1 }//14
,{ 1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,1,0,0,1,0,0,1 }//15
,{ 1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1 }//16
,{ 1,0,0,0,0,0,0,1,1,1,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1 }//17
,{ 1,0,0,1,1,1,1,1,0,0,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1 }//18
,{ 1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1 }//19
,{ 1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,1,0,0,0,1,0,0,1 }//20
,{ 1,0,0,0,1,1,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1 }//21
,{ 1,0,0,0,1,1,1,1,1,1,0,0,0,0,1,0,0,1,1,1,1,1,0,0,1 }//22
,{ 1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1 }//23
,{ 1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1 }//24
,{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 } };//25

int arr2[25][25] = { { 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }//1
,{ 1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 }//2
,{ 1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 }//3
,{ 1,1,1,0,0,1,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1 }//4
,{ 1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1 }//5
,{ 1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0,0,0,0,1 }//6
,{ 1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1 }//7
,{ 1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1 }//8
,{ 1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,1 }//9
,{ 1,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1 }//10
,{ 1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1 }//11
,{ 1,1,1,1,0,0,1,0,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1 }//12
,{ 1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1 }//13
,{ 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1 }//14
,{ 1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,1,0,0,1,0,0,1 }//15
,{ 1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,1,0,0,1,0,0,1 }//16
,{ 1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1 }//17
,{ 1,0,0,1,1,1,1,1,0,0,1,1,0,0,1,0,0,0,0,0,0,1,0,0,1 }//18
,{ 1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1 }//19
,{ 1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,1,0,0,0,1,0,0,1 }//20
,{ 1,0,0,0,1,1,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1 }//21
,{ 1,0,0,0,1,1,1,1,1,1,0,0,0,0,1,0,0,1,1,1,1,1,0,0,1 }//22
,{ 1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1 }//23
,{ 1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1 }//24
,{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 } };//25

int score11 = 1000, count11 = 0;

void gotoxy11(int x, int y)
{
	COORD Pos = { x * 2,y };
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), Pos);
}
void move11(char key, int *x1, int *y1, int x_b, int y_b, int num)
{
	switch (key)
	{
	case 72:
		*y1 = *y1 - 1;
		if (*y1<1)
		{
			*y1 = 1;
		}
		if (num == 1)
		{
			if (arr1[*y1][*x1] == 1)
				*y1 = *y1 + 1;
			score11 -= 10;
			gotoxy11(1, 25);
			printf("score11 : %d ", score11);
			break;
		}
		else if (num == 2)
		{
			if (arr2[*y1][*x1] == 1)
				*y1 = *y1 + 1;
			score11 -= 10;
			gotoxy11(1, 25);
			printf("score11 : %d ", score11);
			break;
		}
	case 75:
		*x1 = *x1 - 1;
		if (*x1<1)
		{
			*x1 = 1;
		}
		if (num == 1) {
			if (arr1[*y1][*x1] == 1)
				*x1 = *x1 + 1;
			score11 -= 10;
			gotoxy11(1, 25);
			printf("score11 : %d ", score11);
			break;
		}
		else if (num == 2) {
			if (arr2[*y1][*x1] == 1)
				*x1 = *x1 + 1;
			score11 -= 10;
			gotoxy11(1, 25);
			printf("score11 : %d ", score11);
			break;
		}
	case 77:
		*x1 = *x1 + 1;
		if (*x1>x_b)
		{
			*x1 = x_b;
		}
		if (num == 1) {
			if (arr1[*y1][*x1] == 1)
				*x1 = *x1 - 1;
			score11 -= 10;
			gotoxy11(1, 25);
			printf("score11 : %d ", score11);
			break;
		}
		else if (num == 2) {
			if (arr2[*y1][*x1] == 1)
				*x1 = *x1 - 1;
			score11 -= 10;
			gotoxy11(1, 25);
			printf("score11 : %d ", score11);
			break;
		}
	case 80:
		*y1 = *y1 + 1;
		if (*y1>y_b)
		{
			*y1 = y_b;
		}
		if (num == 1) {
			if (arr1[*y1][*x1] == 1)
				*y1 = *y1 - 1;
		}
		else if (num == 2) {
			if (arr2[*y1][*x1] == 1)
				*y1 = *y1 - 1;
		}
		score11 -= 10;
		gotoxy11(1, 25);
		printf("score11 : %d ", score11);
		break;
	default:
		break;
	}
}

int main11()
{
	char key;
	int x = 1, y = 1, i, j;
	int a, b, k, c, d;
	srand((signed int)time(NULL));
	k = rand() % 2 + 1;

	if (k == 1)
	{
		for (i = 0; i<25; i++)
		{
			for (j = 0; j<25; j++)
			{
				if (arr1[i][j] == 1)
					printf("▩");
				else
					printf("  ");
			}
			printf("\n");
		}
	}
	else if (k == 2)
	{
		for (i = 0; i<25; i++)
		{
			for (j = 0; j<25; j++)
			{
				if (arr2[i][j] == 1)
					printf("▩");
				else
					printf("  ");
			}
			printf("\n");
		}
	}

	do {

		if (k == 1)
		{
			srand((signed int)time(NULL));
			a = rand() % 20;
			b = rand() % 20;
			c = rand() % 20;
			d = rand() % 20;
			if (arr1[b][a] != 1 && arr1[d][c] != 1)
			{
				arr1[b][a] = 3;
				gotoxy11(a, b);
				printf("☆");
				arr1[b][a] = 4;
				gotoxy11(c, d);
				printf("#");
				break;
			}
		}
		if (k == 2)
		{
			srand((signed int)time(NULL));
			a = rand() % 20;
			b = rand() % 20;
			c = rand() % 20;
			d = rand() % 20;
			if (arr2[b][a] != 1)
			{
				arr2[b][a] = 3;
				gotoxy11(a, b);
				printf("☆");
				arr1[b][a] = 4;
				gotoxy11(c, d);
				printf("#");
				break;
			}
		}
	} while (1);

	gotoxy11(1, 25);
	printf("score11 : %d ", score11);
	gotoxy11(52, 6);
	printf("time : %d", count11);


	do {

		gotoxy11(x, y);
		printf("○");

		if (x == a&&y == b)
		{
			score11 += 500;
			gotoxy11(1, 25);
			printf("\n미로를 통과했습니다.\nscore11 : %d", score11);
			system("pause");
			break;
		}
		if (score11 <= 0 || count11>30)
		{
			gotoxy11(1, 26);
			printf("\nGAMEOVER\n");
			system("pause");
			break;
		}
		else if (x == c&&y == d)
		{
			gotoxy11(1, 26);
			printf("\nGAMEOVER\n");
			system("pause");
			break;
		}


		key = getch();
		printf("\b ");

		move11(key, &x, &y, 50, 50, k);

	} while (key != 27);

	return 0;
}
